{% extends "base.html" %}

{% block title %}
Login
{% endblock %}

{% block usercontent %}
<a href="{{ url_for('page.register_page') }}">
	<button type="button" class="btn btn-outline-light">Sign Up</button>
</a>
<a href="{{ url_for('page.login_page') }}">
	<button type="button" class="btn btn-outline-light">Login</button>
</a>
{% endblock %}

{% block content %}

<div class="container my-auto">
  	<div class="row justify-content-center">
	  	<div class="col-md-6 col-lg-4">
		  	<div class="card mt-4 shadow-sm p-4">
			  	<h5 class="card-title text-center text-success mb-4">Welcome Back!</h5>
			  	<form id = "loginForm" onsubmit="handleSubmit(event)">
				  	<div class="mb-3">
					  	<label for="loginUserName" class="form-label text-success">Username</label>
					  	<input type="text" class="form-control" id="loginUserName" name="user_name" required>
				  	</div>
				  	<div class="mb-3">
					  	<label for="loginPassword" class="form-label text-success">Password</label>
					  	<input type="password" class="form-control" id="loginPassword" name="password" required>
				  	</div>
				  	<div class="d-flex justify-content-between align-items-center">
					  	<button type="submit" class="btn btn-success w-100">Login</button>
				  	</div>
			  	</form>
		  	</div>
	  	</div>
  	</div>
</div>

<script>

	function handleSubmit(event) {
		event.preventDefault();
		const formData = new FormData(document.querySelector('#loginForm'));
		const urlEncodedData = new URLSearchParams(formData).toString();
		formFetch('/api/auth/login', {
			method: "POST",
			body: urlEncodedData
		}).onSuccess(data => {
			console.log(data)
		}).onBadRequest(data => {
			console.log(data)
		});
	}

</script>

{% endblock %}